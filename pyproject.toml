[project]
name = "wordlist-generation"
version = "0.2.2"
description = "Vocabulary-constrained generation server (FastAPI + Transformers + lm-format-enforcer)"
readme = "README.md"
requires-python = ">=3.11, <3.13"

dependencies = [
    "accelerate>=0.32.0",
    "fastapi[standard]",
    "httpx",
    "lm-format-enforcer>=0.11.2",
    "pydantic>=2",
    "python-dotenv",
    "safetensors",
    "torch",
    # Mistral 3.x support stack
    "transformers>=4.46.2,<5.0.0",
    "tokenizers>=0.20.1",
    "huggingface_hub>=0.24.6",
    "mistral-common>=1.6.2",
    # Optional GPU quant + compression
    "bitsandbytes>=0.43.1; platform_system == 'Linux' and platform_machine == 'x86_64'",
    "compressed-tensors",
    # Tokenizers used by some models
    "tiktoken",
    "sentencepiece",
    "uvicorn>=0.30.0",

    # Qwen3 MoE fused backend (pin to the commit you tested)
    "transformers-qwen3-moe-fused @ git+https://github.com/woct0rdho/transformers-qwen3-moe-fused@4caa1524b8f691d24da2fa26e99711b2ec77db44",
]

[dependency-groups]
dev = [
    "ruff",
]

[tool.setuptools.packages.find]
include = ["wordlist_generation*"]

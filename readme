chmod +x setup.sh
./setup.sh

uv run uvicorn server:app --host 0.0.0.0 --port 8010

# This job will use num_beams=4 AND the Spanish vocab with 1000 words
curl -X POST "http://127.0.0.1:8000/v1/batch/jobs?token=my-secret-token-structured-generation&num_beams=4&vocab_lang=es&vocab_n_words=1000" \
     -F "file=@/path/to/your/requests.json"

POST /v1/batch/jobs: You upload your JSON file (which should contain a list of ChatCompletionRequest objects). The server accepts it, assigns a job_id, and immediately returns, while starting the processing in the background.

GET /v1/batch/jobs/{job_id}: You use this to check the status ("pending", "processing", "completed", or "failed").

GET /v1/batch/jobs/{job_id}/results: Once the status is "completed", you call this to download the final JSON response file.


Example File (my_requests.json):
JSON

[
  {
    "model": "your-model-name",
    "messages": [
      {
        "role": "system",
        "content": "You are a helpful assistant."
      },
      {
        "role": "user",
        "content": "What is the capital of France?"
      }
    ]
  },
  {
    "model": "your-model-name",
    "messages": [
      {
        "role": "user",
        "content": "Translate 'hello world' to Spanish."
      }
    ]
  },
  {
    "model": "your-model-name",
    "messages": [
      {
        "role": "user",
        "content": "What is 2+2?"
      }
    ]
  }
]
